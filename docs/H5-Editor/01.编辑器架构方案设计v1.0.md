# H5 编辑器架构方案设计文档 v1.0

## 需求

[https://www/yuque.com/imooc-lego/zlz87z](https://www.yuque.com/books/share/af79538c-09eb-4ddd-bfb7-599816c233bf/whhax9)

## 范围

三大类：

- **前台**：普通用户使用的 **H5**。
- **中台**：用户（企业或个人）使用的**编辑器** -> **H5 编辑器**。
- **后台**：平台管理员使用的**管理系统**。

---

### 前台：用户使用的 H5 端（C 端）

- **使用者和用途**：
  - **使用者**：普通用户，也就是作品的受众。
  - **用途**：可以对作品进行分享，对业务增长复制。
- **开发方式**：
  - **产出**：H5。
  - **实现**：搭配 SSR。

### 中台：企业/作者们使用的 B 端（B 端）

- **使用者和用途**：
  - **使用者**：企业、H5 作品的作者。
  - **用途**：
    - 可以在此产出自己的海报作品。
    - 可以创建、发布、编辑作品。
- **开发方式**：
  - **产出**：H5 编辑器。
  - **实现**：
    - 前后端分离：
      - editor-fe
      - editor-server

### 后台：平台管理员使用的管理系统

- **使用者和用途**：
  - **使用者**：H5 编辑器平台后台管理员。
  - **用途**：
    - 可以在此对作品进行管理，如：
      - 用户管理
      - 模版管理
      - 作品管理
      - 数据统计
        - 统计这部分会用到第三方，如百度统计。
- **开发方式**：
  - **产出**：管理系统（后台）。
  - **实现**：
    - 前后端分离：
      - admin-fe
      - admin-server

---

## 模块设计

- ![模块设计](../../images/h5-editor-模块设计.png '模块设计')

---

## 数据结构设计

### 作品数据结构

```
{
    work: {
        title: '作品标题',
        setting: {}, // 一些可能的配置项 扩展性保证
        props: {}, // 页面的一些设置 扩展性保证
        components: [
            {
                id: '1',
                name: '文本1',
                type: 'text', // 文本类型组件
                attrs: {
                    fontSize: '20px'
                },
                children: ['文本1']
            },
            {
                id: '2',
                name: '图片1',
                type: 'image', // 图片类型组件
                attrs: {
                    src: 'xxx.png',
                    width: '100px',
                    height: '100px'
                },
                children: null
            }
        ]
    }
}
```

### 数据流转关系

- C 端、B 端、后台管理共用一个数据库。
- 新增作品：新建一条 json 数据。
- 修改作品：修改 json 数据。
- 删除作品：标识 json 数据，删除标记。
- 发布作品：标识 json 数据，发布标记。
- 屏蔽作品：标识 json 数据，屏蔽标记。
- C 端获取作品：获取 json，判断作品是否展示。

---

## 扩展性

- 组件扩展
- 编辑器扩展：如支持音频等。
- 页面扩展：增加多语言。
- 作品扩展：增加类型，分析用户作品用户，如贺卡等。

---

## 开发提效

- 脚手架：
  - 创建/发布。
- 组件平台。

---

## 运维保障

- 线上服务和运维服务。
- 安全、监控和报警。
- 服务扩展性。
